---
driver:
  name: azurerm
  subscription_id: 'b02e675a-cee0-49bd-a056-daa7ed05bf4e'
  location: 'East US'
  machine_size: 'Standard_D2s_v3'
  azure_resource_group_prefix: 'butler-tk'
  
provisioner:
  name: chef_zero
  always_update_cookbooks: true
  product_name: chef
  product_version: 17
  channel: stable

### Uncomment this setting to have Test Kitchen fail on any deprecation warning; useful in advance of a new chef-client release
  # deprecations_as_errors: true

verifier:
  name: inspec

platforms:

- name: Windows2019
  os_type: windows
  transport:
    name: winrm
  driver:
    image_urn: MicrosoftWindowsServer:WindowsServer:2019-Datacenter:latest
    network:
      - ["forwarded_port", {guest: 4040, host: 4040, auto_correct: true}]
#    username: "azure"
#    password: "P2ssw0rd"

suites:
  - name: default
    run_list:
    - recipe[win_choco::default]
    verifier:
      inspec_tests:
        - compliance/profiles/win_apps
    attributes:
      audit:
        reporter: 'cli'
        compliance_phase: true
      software:
#       adobereader: true
        vscode: true
#      tags:
#        - choco_nodejs